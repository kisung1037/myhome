<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>계산기</title>
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/calc.css">
</head>
<body>
     <!-- 헤더 -->
     <header>
            <!-- <a href="/myhome/index.html"><img src="/myhome/img/logo.png" alt="logo"></a> -->
    </header>
        <!-- 전역 메뉴 바 -->
        <ul class="gnb">
                <li><a href="/myhome/index.html">홈</a></li>
                <li><a href="/myhome/portfolio/calc.html"class="active">계산기</a></li>
                <li><a href="/myhome/board/list.html">게시판</a></li>
                <li class="float_r"><a href="/myhome/sitemap.html">Sitemap</a></li>
                <li class="float_r"><a href="/myhome/login.html">로그인</a></li>
        </ul>
        <!-- 컨텐츠 -->
        <section>
            <div class="calc">
                <div class="screen">
                    <div class="disp" id="demo" ></div>
                    <div id="textresult"></div>
                </div>
                <div class="top_sign">
                    <button type="button" onclick="addStr(this)" data-num="(">(</a>
                    <button type="button" onclick="addStr(this)" data-num=")">)</a>
                    <button type="button" onclick="backText()">back</a>
                    <button type="button" onclick="clearText()">C</a>
                </div>
                <div class="btn">
                    <button type="button" onclick="addStr(this)" data-num="7">7</button>
                    <button type="button" onclick="addStr(this)" data-num='8'>8</button>
                    <button type="button" onclick="addStr(this)" data-num="9">9</button>
                    <button type="button" onclick="addStr(this)" data-num="*">*</button>
                    <button type="button" onclick="addStr(this)" data-num="4"style="clear: both;">4</button>
                    <button type="button" onclick="addStr(this)" data-num="5">5</button>
                    <button type="button" onclick="addStr(this)" data-num="6">6</button>
                    <button type="button" onclick="addStr(this)" data-num="+">+</button>
                    <button type="button" onclick="addStr(this)" data-num="1"style="clear: both;">1</button>
                    <button type="button" onclick="addStr(this)" data-num="2">2</button>
                    <button type="button" onclick="addStr(this)" data-num="3">3</button>
                    <button type="button" onclick="addStr(this)" data-num="-">-</button>
                    <button type="button" onclick="addStr(this),showResult()"data-num="=">=</button>
                </div>
            </div>
        </section>
        <!-- 풋터 -->
        <footer>
                <address>
                        북위 35.95° 동경 128.25°
                </address>
        </footer>
</body>
<script>
    var MyEnv ={
        history_arr: [],
        result : "",
        el : document.getElementById("demo"),
        el1 : document.getElementById("textresult"),
        NumClicked : false,
    }

// function addNum(el) {
//     var str = el.textContent;
//     MyEnv.history_arr.push(str);
//     showlist();

//     // text += str;
// }
// function addSign(el) {
//     var str = el.textContent;
//     if(str !== "=") { MyEnv.history_arr.push(str) };
//     showlist();

//     if (str === "="){
//         var txt = MyEnv.history_arr.join("");
//         var evalStr = eval(txt);
//         MyEnv.result += evalStr;
//     }
// }

function addStr(x) {
    
    // if(str !== "=") {  MyEnv.history_arr.push(str) 
    var str = x.dataset.num;
    if (str === "="){
        var txt =  MyEnv.history_arr.join("");
        var evalStr = eval(txt);
        MyEnv.result += evalStr;
    }
    // if (str === "+" || str === "-"|| str === "*" || str === "/") {
    //     MyEnv.result ="";
    //     MyEnv.el1.innerHTML = MyEnv.result;
    // }
   
    if(MyEnv.NumClicked == false){
        if(isNaN(str) == true){

        }else{
            MyEnv.history_arr.push(str);
        }
    }else{
        MyEnv.history_arr.push(str);
    }

    if(isNaN(str) == true) { 
        MyEnv.NumClicked = false;
    }else{
        MyEnv.NumClicked = true;
    }
    showlist();
}


function showlist() {
    MyEnv.el.innerHTML = MyEnv.history_arr.join("")
}
function showResult() {
    MyEnv.el1.innerHTML = MyEnv.result;
}

function clearText() {
    MyEnv.history_arr=[];
    MyEnv.result="";
    MyEnv.el1.innerHTML = MyEnv.result;
    MyEnv.el.innerHTML = MyEnv.history_arr.join("")
}
function backText() {
    MyEnv.history_arr.pop();
    MyEnv.el.innerHTML = MyEnv.history_arr.join("");
    MyEnv.result="";
    MyEnv.el1.innerHTML = MyEnv.result;
}

</script>
</html>